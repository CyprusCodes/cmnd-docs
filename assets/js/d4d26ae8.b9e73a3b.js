"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6445],{2691:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var o=t(4848),s=t(8453);const r=t.p+"assets/images/show_form_sample-6aebedbf8c8fba013d58b9f24dd88faa.png",i={sidebar_position:5},l="UI Tools",a={id:"Embed Widget/ui_tools",title:"UI Tools",description:"Overview",source:"@site/docs/Embed Widget/ui_tools.mdx",sourceDirName:"Embed Widget",slug:"/Embed Widget/ui_tools",permalink:"/docs/Embed Widget/ui_tools",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Embed Widget/ui_tools.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Memory",permalink:"/docs/Embed Widget/memory"},next:{title:"CMND Chatbot Package",permalink:"/docs/category/cmnd-chatbot-package"}},d={},c=[{value:"Overview",id:"overview",level:3},{value:"built-in tools",id:"built-in-tools",level:3},{value:"Types of UI Tools",id:"types-of-ui-tools",level:3},{value:"Custom UI Tools",id:"custom-ui-tools",level:3},{value:"Defining a Custom UI Tool",id:"defining-a-custom-ui-tool",level:3},{value:"Example: Custom UI Tool Definition",id:"example-custom-ui-tool-definition",level:4},{value:"Key Properties of a Custom UI Tool",id:"key-properties-of-a-custom-ui-tool",level:4},{value:"Usage",id:"usage",level:3},{value:"Advanced Custom UI Tool Dom Manipulation Example",id:"advanced-custom-ui-tool-dom-manipulation-example",level:3}];function h(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"ui-tools",children:"UI Tools"})}),"\n",(0,o.jsx)(n.h3,{id:"overview",children:"Overview"}),"\n",(0,o.jsxs)(n.p,{children:["The embed widget offers the ability to run tools with AI context or arguments, allowing you to display information or manipulate the DOM based on the customization provided to the tool. Additionally, it includes a set of built-in tools accessible via ",(0,o.jsx)(n.code,{children:"window.cmndBuiltInTools"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"built-in-tools",children:"built-in tools"}),"\n",(0,o.jsx)(n.p,{children:"The built-in tools are pre configured utilities that come with the embed widget. These tools are available by default unless you provide custom tools."}),"\n",(0,o.jsx)(n.p,{children:"Below is a list of the built-in tools along with their descriptions."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"show_form"}),(0,o.jsx)(n.br,{}),"\n","Displays a form based on a provided JSON schema."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"capture_signature"}),(0,o.jsx)(n.br,{}),"\n","Captures a user's signature."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"show_rating"}),(0,o.jsx)(n.br,{}),"\n","Displays a rating input widget."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"show_video_player"}),(0,o.jsx)(n.br,{}),"\n","Displays a video player."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"show_image_viewer"}),(0,o.jsx)(n.br,{}),"\n","Displays an image viewer."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["These tools can be utilized by providing a prompt related to the tool's functionality.\nFor example, asking ",(0,o.jsx)(n.em,{children:'"Show me a login form"'})," will render a login form."]}),"\n",(0,o.jsx)("a",{href:r,target:"_blank",children:(0,o.jsx)("img",{src:r,width:"400"})}),"\n",(0,o.jsx)(n.h3,{id:"types-of-ui-tools",children:"Types of UI Tools"}),"\n",(0,o.jsx)(n.p,{children:"There are 4 variations of UI tools that you can implement and use."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["UI tool that is rendered in the chat box as a message card which doesn't capture user input. These tools have to use the ",(0,o.jsx)(n.code,{children:"ref"})," and ",(0,o.jsx)(n.code,{children:"captureResults"})," parameters within their ",(0,o.jsx)(n.code,{children:"runCmd"})," method. e.g: ",(0,o.jsx)(n.code,{children:"plot_graph"})]}),"\n",(0,o.jsxs)(n.li,{children:["UI tool that is rendered in the chat box as a message card which captures user input. These tools have to use the ",(0,o.jsx)(n.code,{children:"ref"})," parameter within their ",(0,o.jsx)(n.code,{children:"runCmd"})," method. e.g: ",(0,o.jsx)(n.code,{children:"capture_signature"})]}),"\n",(0,o.jsxs)(n.li,{children:["UI tool that is NOT rendered in the chat box which doesn't capture user input. These tools might access DOM directly if necessary. These tools only use the ",(0,o.jsx)(n.code,{children:"functionArgs"})," paramter within ",(0,o.jsx)(n.code,{children:"runCmd"})," method. e.g: ",(0,o.jsx)(n.code,{children:"change_background_color"})]}),"\n",(0,o.jsxs)(n.li,{children:["UI tool that is NOT rendered in the chat box which captures user input. These tools might access DOM directly if necessary. These tools use the ",(0,o.jsx)(n.code,{children:"functionArgs"})," and ",(0,o.jsx)(n.code,{children:"captureResults"})," paramters within their ",(0,o.jsx)(n.code,{children:"runCmd"})," method. e.g: ",(0,o.jsx)(n.code,{children:"show_input_modal"})]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"custom-ui-tools",children:"Custom UI Tools"}),"\n",(0,o.jsxs)(n.p,{children:["Custom UI tools allow you to extend the functionality of the embed widget by defining your own tools tailored to specific use cases. These tools can override the default built-in tools or work alongside them by leveraging ",(0,o.jsx)(n.code,{children:"window.cmndBuiltInTools"}),". Custom tools provide flexibility and adaptability, enabling you to create unique experiences that align with your application's requirements."]}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["Providing custom UI tools overwrites the built-in tools, but you can extend your custom UI tools with the built-in tools using ",(0,o.jsx)(n.code,{children:"window.cmndBuiltInTools"}),"."]})}),"\n",(0,o.jsx)(n.h3,{id:"defining-a-custom-ui-tool",children:"Defining a Custom UI Tool"}),"\n",(0,o.jsxs)(n.p,{children:["Custom UI tools allow you to extend the functionality of the embed widget to suit your specific requirements. Each custom tool must have a ",(0,o.jsx)(n.code,{children:"functionType"})," set to ",(0,o.jsx)(n.code,{children:"ui"})," and follow a consistent structure. Below is a guide on how to define a custom UI tool, explained using a sample tool."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h4,{id:"example-custom-ui-tool-definition",children:"Example: Custom UI Tool Definition"}),"\n",(0,o.jsx)(n.p,{children:"Here\u2019s a complete example of a custom tool:\nExample functionality:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Updates the background color of the page."}),"\n",(0,o.jsxs)(n.li,{children:["Updates the ",(0,o.jsx)(n.code,{children:"innerHTML"})," of the referenced element with a confirmation message."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'// script.js\n{\n  name: "change_background_color", // Unique tool name\n  description: "Changes the background color of the page", // Tool description\n  category: "UI", // Main category\n  subcategory: "BG", // Subcategory\n  functionType: "ui", // Function type (always "ui")\n  dangerous: false, // Safe tool indicator\n  associatedCommands: [], // Additional commands (if any)\n  prerequisites: [], // Prerequisites (if any)\n  argumentSchema: { // Arguments required by the tool\n    type: "object",\n    properties: {\n      bgColor: {\n        type: "string", // The background color argument\n        minLength: 1, // Minimum length validation\n        errorMessage: {\n          required: "Background Color is required", // Error message if missing\n        },\n      },\n    },\n    required: ["bgColor"], // Required arguments\n  },\n  rerun: true, // Allows rerunning the tool\n  rerunWithDifferentParameters: true, // Allows rerunning with different inputs\n  capturesUserInput: true, // Captures user input\n  runCmd: ({ functionArgs }, ref) => {\n    const { bgColor } = functionArgs;\n    const messageContainer = ref;\n\n    if (messageContainer) {\n      messageContainer.innerHTML = `Background color changed to ${bgColor}`;\n    }\n\n    document.body.style.backgroundColor = bgColor; // Change background color\n  },\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h4,{id:"key-properties-of-a-custom-ui-tool",children:"Key Properties of a Custom UI Tool"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"name"})}),(0,o.jsx)(n.br,{}),"\n","A unique identifier for the tool.",(0,o.jsx)(n.br,{}),"\n","Example: ",(0,o.jsx)(n.code,{children:'"change_background_color"'})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"description"})}),(0,o.jsx)(n.br,{}),"\n","A short description of what the tool does.",(0,o.jsx)(n.br,{}),"\n","Example: ",(0,o.jsx)(n.code,{children:'"Changes the background color of the page"'})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"dangerous"})}),(0,o.jsx)(n.br,{}),"\n","Indicates whether the tool performs potentially harmful actions.",(0,o.jsx)(n.br,{}),"\n","Example: ",(0,o.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"associatedCommands"})})," and ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"prerequisites"})}),(0,o.jsx)(n.br,{}),"\n","Define additional commands or prerequisites required by the tool. These can be left empty if not needed.",(0,o.jsx)(n.br,{}),"\n","Example: ",(0,o.jsx)(n.code,{children:"[]"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"argumentSchema"})}),(0,o.jsx)(n.br,{}),"\n","Defines the arguments required to run the tool in JSON schema format:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"properties"}),": Lists the arguments.",(0,o.jsx)(n.br,{}),"\n","Example: ",(0,o.jsx)(n.code,{children:"bgColor"})," (a required string)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"required"}),": Specifies mandatory arguments."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"errorMessage"}),": Custom error messages for validation."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"rerun"})})," and ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"rerunWithDifferentParameters"})}),(0,o.jsx)(n.br,{}),"\n","Specifies if the tool can be rerun with the same or modified parameters.",(0,o.jsx)(n.br,{}),"\n","Example: Both set to ",(0,o.jsx)(n.code,{children:"true"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"capturesUserInput"})}),(0,o.jsx)(n.br,{}),"\n","This parameter denotes whether the given UI tool is responsible for capturing input from the user. For example, if your UI tool is showing an input field that is filled by the user, then you should set this parameter to true. If your UI tool is only showing information but is not responsible for capturing input e.g showing an image, or a chart you can set this to false. When this field is set to true, chatbot will display the UI tool and respond back to the user acknowledging the successful run of the tool. If it's set to false, it will only dislay the tool but it won't respond.\nExample: ",(0,o.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"runCmd"})}),(0,o.jsx)(n.br,{}),"\n","The function that implements the tool\u2019s functionality. It receives:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"functionArgs"}),": Contains the tool's arguments (e.g., ",(0,o.jsx)(n.code,{children:"bgColor"}),")."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ref"}),": A reference to a DOM element that can be updated."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"usage",children:"Usage"}),"\n",(0,o.jsxs)(n.p,{children:["We do not need to register ",(0,o.jsx)(n.a,{href:"#built-in-tools",children:"built-in tools"}),", but we need to register custom UI tools using the ",(0,o.jsx)(n.code,{children:"registerTools"})," command"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'// script.js\nwindow.cmndChat(\n  "registerTools",\n   ui_tools: [\n      {\n         name: "change_background_color",\n         // ... other values\n      }\n      {\n         name: "navigate_to_page",\n         //... other values\n      }\n   ]\n);\n'})}),"\n",(0,o.jsxs)(n.p,{children:["To extend ",(0,o.jsx)(n.strong,{children:"custom UI tools"})," with ",(0,o.jsx)(n.strong,{children:"built-in tools"})," you will need to include the built-in tools using ",(0,o.jsx)(n.code,{children:"window.cmndBuiltInTools"}),". Below is a example"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'// script.js\nwindow.cmndChat(\n  "registerTools",\n   ui_tools: [\n      window.cmndBuiltInTools.capture_signature,\n      window.cmndBuiltInTools.show_form,\n      {\n         name: "change_background_color",\n         // ... other values\n      }\n      {\n         name: "navigate_to_page",\n         //... other values\n      }\n   ]\n);\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"advanced-custom-ui-tool-dom-manipulation-example",children:"Advanced Custom UI Tool Dom Manipulation Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'{\n  name: "plot_graph",\n  description: "Plots a graph on the page using Chart.js",\n  category: "UI",\n  subcategory: "Graph",\n  functionType: "ui",\n  dangerous: false,\n  associatedCommands: [],\n  prerequisites: [],\n  argumentSchema: {\n    type: "object",\n    properties: {\n      type: {\n        type: "string",\n        enum: ["line", "bar", "pie", "doughnut"],\n        errorMessage: {\n          required: "Graph type is required",\n          enum: "Graph type must be one of: line, bar, pie, or doughnut"\n        }\n      },\n      data: {\n        type: "object",\n        properties: {\n          labels: {\n            type: "array",\n            items: { type: "string" },\n            errorMessage: {\n              required: "Labels for the graph are required"\n            }\n          },\n          datasets: {\n            type: "array",\n            items: {\n              type: "object",\n              properties: {\n                label: { type: "string" },\n                data: {\n                  type: "array",\n                  items: { type: "number" },\n                  errorMessage: {\n                    required: "Dataset values are required"\n                  }\n                },\n                backgroundColor: {\n                  type: "array",\n                  items: { type: "string" }\n                },\n                borderColor: {\n                  type: "array",\n                  items: { type: "string" }\n                },\n                borderWidth: { type: "number" }\n              }\n            }\n          }\n        },\n        required: ["labels", "datasets"]\n      }\n    },\n    required: ["type", "data"]\n  },\n  rerun: true,\n  rerunWithDifferentParameters: true,\n  capturesUserInput: true,\n  runCmd: ({ functionArgs }, ref) => {\n    const { type, data } = functionArgs;\n\n    // Check if Chart.js is already loaded\n    if (!window.Chart) {\n      console.log("Chart.js not found. Loading dynamically...");\n\n      // Create a script element to load Chart.js\n      const script = document.createElement("script");\n      script.src = "https://cdn.jsdelivr.net/npm/chart.js";\n      script.onload = () => {\n        console.log("Chart.js loaded successfully.");\n        renderChart();\n      };\n      script.onerror = () => {\n        console.error("Failed to load Chart.js.");\n      };\n\n      document.head.appendChild(script);\n    } else {\n      renderChart();\n    }\n\n    function renderChart() {\n      // Ensure the ref element exists\n      if (!ref) {\n        console.error("No reference element provided for the chart.");\n        return;\n      }\n\n      // Check if the ref element already contains a canvas, if so, reuse it\n      let canvas = ref.querySelector("canvas");\n      if (!canvas) {\n        // Create a new canvas element\n        canvas = document.createElement("canvas");\n        ref.appendChild(canvas);\n      }\n\n      // Destroy any existing chart on the canvas\n      if (ref.chartInstance) {\n        ref.chartInstance.destroy();\n      }\n\n      // Render the chart using Chart.js\n      const ctx = canvas.getContext("2d");\n      ref.chartInstance = new Chart(ctx, {\n        type,\n        data,\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              position: "top"\n            }\n          }\n        }\n      });\n\n      console.log("Graph successfully plotted inside the provided ref.");\n    }\n  }\n}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var o=t(6540);const s={},r=o.createContext(s);function i(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);